<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safari Image Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-box {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        img {
            max-width: 400px;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        .info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        code {
            background: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Safari Image Test</h1>
    
    <div class="info">
        <strong>Purpose:</strong> This tests if Safari can load the license plate images.
    </div>

    <div class="test-box">
        <h2>Test 1: Direct Image Load</h2>
        <p>This should show a blue California license plate:</p>
        <img src="plates/usa/california.svg" alt="California">
        <p><strong>URL:</strong> <code>plates/usa/california.svg</code></p>
    </div>

    <div class="test-box">
        <h2>Test 2: Texas Plate</h2>
        <p>This should show a red Texas license plate:</p>
        <img src="plates/usa/texas.svg" alt="Texas">
        <p><strong>URL:</strong> <code>plates/usa/texas.svg</code></p>
    </div>

    <div class="test-box">
        <h2>Test 3: JavaScript Load</h2>
        <p>This image is loaded via JavaScript (like in the game):</p>
        <div id="jsTest"></div>
        <p id="jsStatus">Loading...</p>
    </div>

    <div class="test-box">
        <h2>Console Output:</h2>
        <p>Open Safari Console (Cmd+Option+C) and check for any errors below this message.</p>
        <pre id="consoleOutput" style="background: white; padding: 10px; border-radius: 5px;"></pre>
    </div>

    <script>
        // Test JavaScript image loading
        const container = document.getElementById('jsTest');
        const status = document.getElementById('jsStatus');
        const consoleOut = document.getElementById('consoleOutput');
        
        function log(msg) {
            console.log(msg);
            consoleOut.textContent += msg + '\n';
        }
        
        log('Starting JavaScript image test...');
        
        const img = document.createElement('img');
        img.src = 'plates/usa/florida.svg';
        img.alt = 'Florida';
        img.style.maxWidth = '400px';
        
        img.onload = function() {
            log('âœ“ Image loaded successfully!');
            log('Image dimensions: ' + img.naturalWidth + 'x' + img.naturalHeight);
            status.textContent = 'âœ“ Success! Image loaded.';
            status.style.color = 'green';
        };
        
        img.onerror = function() {
            log('âœ— Image failed to load');
            status.textContent = 'âœ— Failed to load image';
            status.style.color = 'red';
        };
        
        container.appendChild(img);
        
        // Check if service workers are registered
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(registrations => {
                log('Service Workers found: ' + registrations.length);
                registrations.forEach((reg, i) => {
                    log('  SW ' + (i+1) + ': ' + reg.scope);
                });
            });
        }
        
        // Test fetch
        fetch('plates/usa/california.svg')
            .then(response => {
                log('Fetch test: ' + response.status + ' ' + response.statusText);
                log('Content-Type: ' + response.headers.get('content-type'));
            })
            .catch(error => {
                log('Fetch error: ' + error.message);
            });
    </script>
</body>
</html>

